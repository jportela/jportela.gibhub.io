<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Jasmine Tests</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>Jasmine Tests</h1>
                </section>

                <section>
                    <section>
                        <h2>What is Jasmine?</h2>
                        <pre><code data-trim contenteditable>
    describe('Test Library', function () {  // a test suite
        // a test case
        it('initializes the testing platform', function () {
            expect(true).toBe(true);    // an expectation with a matcher
        });
    });
                        </code></pre>
                    </section>
                    <section>
                        <h2>Jasmine Reporter</h2>
                        <img src="reporter.png" width="100%" alt="Reporter example" />
                        <ul>
                            <li>Graphical (HTML)</li>
                            <li>TestNG (XML)</li>
                        </ul>
                    </section>
                    <section>
                        <h2>And that's pretty much it!</h2>
                        <ul>
                            <li><a href="http://jasmine.github.io/">http://jasmine.github.io/</a></li>
                        </ul>
                    </section>
                </section>
                
                <section>
                    <h1>SBW Frontend Testing Framework</h1>
                </section>

                <section>
                    <h2>Motivations</h2>
                    <ul>
                        <li>More coverage</li>
                        <li>Easier to isolate the problems</li>
                        <li>More predictability of the side-effects of our changes</li>
                        <li>Selenium is f#cking slow!</li>
                    </ul>
                </section>

                <section>
                    <section>
                        <h2>Unit Tests - The FIRST Principle</h2>
                        <ul>
                            <li>Fast</li>
                            <li>Isolated</li>
                            <li>Repeatable</li>
                            <li>Self-verifying</li>
                            <li>Timely</li>
                        </ul>   
                    </section>
                    <section>
                        <h2>Challenges inherent to SBW</h2>
                        <ul>
                            <li>Tightly coupled dependencies (YUI, DOM, DAVE)</li>
                            <li>The server has the control</li>
                        </ul>
                    </section>
                </section>

                <section>
                    <section>
                        <h1>Integration Testing</h1>
                    </section>
                    <section>
                        <h2>Steps needed</h2>
                        <ul>
                            <li>Load the initial HTML</li>
                            <li>Load all JS dependencies</li>
                            <li>Run the Jasmine test</li>
                            <li>Interpret the results</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Demo time</h1>
                        <p>Yey! I thought he would never shut up!</p>
                        <p>
                            <a href="http://sportsbook.sports1.stable-alpha.dev.betfair/sandbox?toggles=jasmine&amp;test=testcore,testlibrary">http://sportsbook.sports1.stable-alpha.dev.betfair/sandbox?toggles=jasmine&amp;test=testcore,testlibrary</a>
                        </p>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Challenge</h2>
                        
                        <p>Q: Load modules with predictable data?</p>
                        <p class="fragment">A: Use the mock server!</p>

                    </section>
                    <section>
                        <h2>The Mock Server</h2>
                        <ul>
                            <li>Mocks responses from services</li>
                            <li>Used by the server</li>
                            <li>Renders the first page impression</li>
                            <li>Mocks can be reused</li>
                        </ul>
                    </section>

                    <section>
                        <h1>Demo Time</h1>
                        <p>Setting up the mock environment</p>
                    </section>

                </section>

                <section>
                    <section>
                        <h1>Test Library</h1>
                        <p>Managing complexity</p>
                    </section>
                    <section>
                        <h2>Functionality</h2>
                        <ul>
                            <li>Creates a clean YUI instance</li>
                            <li>Intercepts requests to the server</li>
                            <li>Provides extensible abstractions via modules</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Modules</h2>
                        <ul>
                            <li>Supervisors - abstractions for our specific platform</li>
                            <li>Mocks - create application structures (for instance, instructions JSON or market objects)</li>
                            <li>Generators - generate HTML via templating (remember, no server)</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Demo Time</h1>
                        <p>Let's close some racing markets!</p>
                    </section>
                </section>

                <section>
                    <section>
                        <h1>Next Steps</h1>
                    </section>
                    <section>
                        <h2>Strive for FIRST Unit Testing</h2>
                        <ul>
                            <li>Loose couple the dependencies</li>
                            <li>Aim for a functional programming style</li>
                            <li>Test small parts, test wisely</li>
                        </ul>
                    </section>
                    <section>
                        <h2>More coverage</h2>
                        <ul>
                            <li>Live Scores</li>
                            <li>Market Updates</li>
                            <li>Intensive Javascript modules</li>
                            <li>Instructions</li>
                            <li>Interactions</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Adoption</h2>
                        <ul>
                            <li>QA community</li>
                            <li>Front End Developers</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <h1>Questions?</h1>
                    <p>Let's see the code behind it and do a code review!</p>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: 'night', // available themes are in /css/theme,
                backgroundTransition: 'slide',
                transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
