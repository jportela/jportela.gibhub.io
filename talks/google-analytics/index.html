<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Google Analytics</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
        <div id="notice"></div>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>Google Analytics</h1>
                    <h2>SBW Implementation</h2>
                </section>

                <section>
                  <section>
                      <h2>What is Google Analytics?</h2>
                      <p>In two words - <strong>User tracking</strong></p>
                      <ul>
                        <li>Know your users</li>
                        <li>Selling and Conversions</li>
                        <li>Test. Adapt. Succeed. Repeat.</li>
                      </ul>
                  </section>

                  <section data-background="img/analytics-realtime.png">

                  </section>

                  <section>
                    <h2>How to implement it?</h2>
                    <p>You can do it on your personal webpage!</p>
                    <ul>
                      <li>Go to <a href="http://www.google.com/analytics">
                        http://www.google.com/analytics</a></li>
                      <li>Register your website</li>
                      <li>Grab the tracking code and paste it to your website</li>
                    </ul>
                  </section>

                  <section data-background="img/tracking-code.png">

                  </section>
                </section>

                <section>
                  <section>
                    <h1>Events, Dimensions and Metrics</h1>
                  </section>

                  <section>
                    <h2>Events</h2>
                    <p>Tracks a user interaction with the page.</p>

                    <table>
                      <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Examples</th>
                      <tr>
                        <td>Category</td>
                        <td>Used for Grouping</td>
                        <td>Betslip, Banner, Interface</td>
                      </tr>
                      <tr>
                        <td>Action</td>
                        <td>Identifier for the user action</td>
                        <td>Viewed Tab, Placed Bet, Navigated</td>
                      </tr>
                      <tr>
                        <td>[Label]</td>
                        <td>Further grouping (more granular)</td>
                        <td>Football, Basketball, Cashout, multipickavb</td>
                      </tr>
                      <tr>
                        <td>[Value]</td>
                        <td>Event quantification</td>
                        <td>100 (stake)</td>
                      </tr>
                    </table>
                  </section>

                  <section>
                    <h2>Sending an event</h2>
<pre><code id="code1" data-trim contenteditable>
ga('send', 'event', 'Induction', 'Tested an Event', 'Blip', 20);
</code></pre>

<button class="ui-execute" data-target="code1">Execute</button>

                </section>


                <section>
                    <h1>SBW Frontend Testing Framework</h1>
                </section>

                <section>
                    <h2>Motivations</h2>
                    <ul>
                        <li>More coverage</li>
                        <li>Easier to isolate the problems</li>
                        <li>More predictability of the side-effects of our changes</li>
                        <li>Selenium is f#cking slow!</li>
                    </ul>
                </section>

                <section>
                    <section>
                        <h2>Unit Tests</h2>
                        <h3>The FIRST Principle</h3>
                        <ul>
                            <li>Fast</li>
                            <li>Isolated</li>
                            <li>Repeatable</li>
                            <li>Self-verifying</li>
                            <li>Timely</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Challenges inherent to SBW</h2>
                        <ul>
                            <li>Tightly coupled dependencies (YUI, DOM, DAVE)</li>
                            <li>The server has the control</li>
                        </ul>
                    </section>
                </section>

                <section>
                    <section>
                        <h1>Integration Testing</h1>
                    </section>
                    <section>
                        <h2>Steps needed</h2>
                        <ul>
                            <li>Load the initial HTML</li>
                            <li>Load all JS dependencies</li>
                            <li>Run the Jasmine test</li>
                            <li>Interpret the results</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Demo time</h1>
                        <p>Yey! I thought he would never shut up!</p>
                        <p>
                            <a target="_blank" href="http://sportsbook.sports1.stable-alpha.dev.betfair/sandbox?toggles=jasmine&amp;test=testcore,testlibrary&amp;bundling=true">http://sportsbook.sports1.stable-alpha.dev.betfair/sandbox?toggles=jasmine&amp;test=testcore,testlibrary</a>
                        </p>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Challenge</h2>

                        <p>Q: Load modules with predictable data?</p>
                        <p class="fragment">A: Use the mock server!</p>

                    </section>
                    <section>
                        <h2>The Mock Server</h2>
                        <ul>
                            <li>Mocks responses from services</li>
                            <li>Used by the server</li>
                            <li>Renders the first page impression</li>
                            <li>Mocks can be reused</li>
                        </ul>
                    </section>

                    <section>
                        <h1>Demo Time</h1>
                        <p>Setting up the mock environment</p>
                    </section>

                </section>

                <section>
                    <section>
                        <h1>Test Library</h1>
                        <p>Managing complexity</p>
                    </section>
                    <section>
                        <h2>Functionality</h2>
                        <ul>
                            <li>Creates a clean YUI instance</li>
                            <li>Intercepts requests to the server</li>
                            <li>Provides extensible abstractions via modules</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Modules</h2>
                        <ul>
                            <li>Supervisors - helpers for abstracting functionality</li>
                            <li>Mocks - create mock data (for instance, instructions JSON or market objects)</li>
                            <li>Generators - generate HTML via templating (remember, no server)</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Demo Time</h1>
                        <p>Let's close some racing markets!</p>
                    </section>
                </section>

                <section>
                    <section>
                        <h1>Next Steps</h1>
                    </section>
                    <section>
                        <h2>Strive for FIRST Unit Testing</h2>
                        <ul>
                            <li>Loose couple the dependencies</li>
                            <li>Aim for a functional programming style</li>
                            <li>Test small parts, test wisely</li>
                        </ul>
                    </section>
                    <section>
                        <h2>More coverage</h2>
                        <ul>
                            <li>Live Scores</li>
                            <li>Market Updates</li>
                            <li>Google Analytics</li>
                            <li>Intensive Javascript modules</li>
                            <li>Instructions and Interactions</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Adoption</h2>
                        <ul>
                            <li>QA community</li>
                            <li>Front End Developers</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Make it better!</h2>
                        <ul>
                            <li>Improve Documentation: <a target="_blank" href="http://apidocs.app.betfair/sportsbook/0.1-SNAPSHOT/developer/jasmine.html">http://apidocs.app.betfair/sportsbook/0.1-SNAPSHOT/developer/jasmine.html</a></li>
                            <li>Improve JSDoc: <a target="_blank" href="http://apidocs.app.betfair/sportsbook/0.1-SNAPSHOT/jsdoc/TestLibrary.html">http://apidocs.app.betfair/sportsbook/0.1-SNAPSHOT/jsdoc/TestLibrary.html</a></li>
                            <li>Use it. You'll then make it better</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <h1>Questions?</h1>
                    <p>Let's see the code behind it and do a code review!</p>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: 'night', // available themes are in /css/theme,
                backgroundTransition: 'slide',
                transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

        <script>
          (function () {
            var notice = document.getElementById('notice'),
                noticeTimer;
            document.getElementsByTagName('body')[0].addEventListener('click', function (e) {
              var evalTarget;
              if (e.target.tagName === 'BUTTON' && e.target.classList.contains('ui-execute')) {
                evalTarget = e.target.getAttributeNode("data-target");
                if (evalTarget) {
                  eval(document.getElementById(evalTarget.value).textContent);
                  notice.textContent = "Sent GA event";
                  notice.classList.add('visible');
                  if (noticeTimer) {
                    window.clearTimeout(noticeTimer);
                  }
                  noticeTimer = window.setTimeout(function () {
                    if (noticeTimer) {
                      notice.classList.remove('visible');
                    }
                  }, 2000);
                }
              }
            });
          })();
        </script>

    </body>
</html>
